### 단일 서버

![image](https://user-images.githubusercontent.com/53366407/111013955-d8eb1800-83e4-11eb-82f7-6f1659400313.png)

- 요청을 보내는 클라이언트와 요청을 처리하는 서버가 한 대가 있다.
- 데이터베이스와 애플리케이션이 하나의 서버에서 실행되고 있다.
- 따라서 별도의 네트워크설정을 할 필요가 없다는 장점이 있다.
- 단점
    - 전체 서비스에 장애가 생길 확률이 높다
        - 데이터베이스와 애플리케이션이 자원을 공유하기 때문에 하나라도 자원을 모두 사용하거나 장애가 발생하면 전체 서비스의 문제가 발생한다.
    - 서버 자원을 효율적으로 사용하기 어렵다
        - 애플리케이션과 데이터베이스는 각 속성에 따라 더 중요한 자원의 종류나 최적화를 위해 필요한 OS 설정이 다를 수 있다. 둘다 만족하기 위해 필요 이상으로 고사양 서버를 사용해야 한다.
    - 보안성이 떨어진다
        - 데이터베이스는 보안상 포트나 IP 등 접속 지점을 최소화 해야함
        - ***웹 애플리케이션은 특성상 다양한 IP 주소와 포트 번호에 대해 요청을 받을 수 있어야 한다.***
        - 서버 내 여러 파일들도 업로드될 수 있으모로 데이터베이스가 공격당할 가능성이 높아진다.
    - 스케일 아웃이 힘듦
        - 서버 자원 확장을 할 때 추가된 서버들의 주소를 새로 알아야 하며, 데이터도 똑같은 복제본이 여러 개 생겨 관리하기 어렵다

### 애플리케이션/데이터베이스 서버 분리

![image](https://user-images.githubusercontent.com/53366407/111013961-e6a09d80-83e4-11eb-965f-920347f92f73.png)

- 단일 서버 구성에서 데이터베이스를 별도 서버로 분리함
- 단일 서버의 3가지 단점은 해결되지만,  `스케일 아웃` 문제는 해결되지 않다.
- 이유는 클라이언트에서는 하나의 서버를 바라보고 있기 때문이다.

### 서버 단위의 로드 밸런서

![image](https://user-images.githubusercontent.com/53366407/111013967-ec967e80-83e4-11eb-85df-072d901f03a1.png)

- 클라이언트가 애플리케이션을 실행하는 서버와 직접 통신하는 대신 로드밸런서라는 서버와 통신하고 그 뒤에 여러 대의 애플리케이션 서버를 두는 방식
- 클라이언트는 로드 밸런서와 통신하고 로드 밸런서가 뒤에 있는 서버에게 나눠 준다
- 응답을 로드밸런서가 받아 클라이언트에게 처리한다.
- 가장 큰 이점은 스케일 아웃이 가능하다는 것이며, 하나의 서버가 문제가 발생하도 다른 서버를 이용하면 되기 때문에 장애를 최소화 할수 있다는 점이다.
- 그러나 로드 밸런서가 장애가 나면 전체 서비스에 장애가 나기 때문에 주의 해야 한다.
- 로드 밸런서는 OSI 7레이어에서 L4 스위치가 역할을 한다.

### 서버 내 앱 단위의 로드 밸런서

- 여러 애플리케이션 프로세스들에 요청을 분산시키는 앱 단위 로드밸런서를 추가한다.
- 애플리케이션을 동일한 여러 프로세스로 만들어 외부에 들어온 요청을 하나의 프로세스 중 하나로 보내주는 역할을 하는 방식
- 하나의 서버에서 여러 개의 요청을 동시 처리할 수 있고 서버 자원을 최대한으로 사용할 수 있는 만큼 프로세스를 실행해 서버 자원도 더욱 효율적으로 사용 가능하다.
