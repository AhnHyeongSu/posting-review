
인터넷에서 프로그램을 다운로드받아 PC에 설치해 본 적이 있을 것이다. 프로그램을 설치해서 아이콘을 더블클릭해서 시작하면 창이 뜬다. 다시 한번 프로그램 아이콘을 더블클릭하면 다른 별도의 창이 열릴 것이다. 이것이 프로세스나 스레드라고 불리는 것이다.

프로세스 및 스레드는 프로그램 실행 파일 자체가 아니라 OS상에서 실행되서 어느 정도 독립성을 가지고 동작하는 것이다. 대부분의 책이 '사람 모양'으로 표현하고 있듯이, 프로세스나 스레드가 시작되는 것은 마치 사람이 숨을 쉬기 시작하면서 활동하는 것과 같은 의미다. 이 책을 다 읽을 때쯤이면 프로그램을 실행할 때마다 막대 인간이 머릿속에 떠오를 것이다.

프로세스 및 스레드가 활동하려면 메모리 공간이 필요하다. 이것은 커널에 의해 메모리상에 확보된다. 이 메모리 공간은 막대 인간이 자신을 위해 소유하는 개인공간이라 할 수 있다. 다양한 처리를 하면서 데이터를 주고받기 위해 이 공간을 사용한다.


먼저, 웹 서버를 보자. 'httpd 프로세스'라고 쓰여 있는 막대 인간이 프로세스다. 그 주변을 감싸고 있는 하얀 공간이 있는데, 이것이 프로세스의 메모리 공간을 나타낸다. 프로세스의 구체적 동작에 대해서는 뒤에서 설명하기 때문에 여기서는 각각의 막대인간이 독립된 메모리 공간을 가지고 있다는 점에 주목하자.

AP서버도 보자. '스레드'라고 쓰여 있는 막대 인간이 쓰레드다. 웹 서버와 달리 AP서버 상의 막대 인간은 하나의 메모리 공간을 공유하고 있다. 이것이 프로세스와 스레드의 큰 차이점이다. 프로세스는 전용 메모리 공간을 이용해서 동작한다. 스레드는 다른 스레드와 메모리 공간을 공유하고 있는 운명 공동체다.

예를 들면, 프로세스는 맞벌이 부부처럼 통장을 각자 관리하고 있는 형태다. 반면에 쓰레드는 아내가 남편의 부양 가족이 되는 모습이다. 자녀가 많아지면 부양가족이 늘어나지만, 하나의 통장으로 꾸려나가야 한다. 두 가족 모두 구조는 다르지만 생활한다는 목적은 같다. 프로세스와 스레드의 관계도 비슷하다.

프로세스와 쓰레드 중에 어떤 것을 이용할지는 애플리케이션 개발자가 정한다. 이 때 각각의 특성을 이해하고 설계와 프로그래밍할 필요가 있다. 예를 들어, 프로세스는 독자 메모리 공간을 가지기 때문에 생성 시 CPU 부하가 스레드와 비교해 높아진다. 때문에 멀티프로세스 애플리케이션에서는 프로세스 생성 부담을 낮추기 위해 미리 프로세스를 시작시켜 둔다. 이 실제 예가 연결 풀링이라 불리는 것으로 7장에서 자세히 다룬다.

여러 개를 동시에 실행할 때의 프로세스와 스레드의 장단점을 간단히 정리해 보았다.

<프로세스와 스레드 비교>

- 프로세스 
장점: 개별처리 독립성이 높다
단점: 생성 시 cpu 부하가 높다

- 스레드
장점: 생성 시 부하가 낮다
단점 : 메모리 공간을 공유하기 때문에 의도하지 않는 데이터 읽기/쓰기가 발생할 수 있다.

단, 프로세스가 메모리 공간을 공유할 수 없는 것은 아니다. 예를 들어, 오라클 DB에서는 여러 프로세스가 '공유 메모리공간'을 상호 이용할 수 있게 되어 있다.